(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{1505:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"taro_input_core",(function(){return Input}));var _index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(225);function getTrueType(type,confirmType,password){if(void 0===type)return"text";if(!type)throw new Error("unexpected type");return"search"===confirmType&&(type="search"),password&&(type="password"),"digit"===type&&(type="number"),type}function fixControlledValue(value){return null!=value?value:""}const Input=class{constructor(hostRef){Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.g)(this,hostRef),this.onInput=Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.c)(this,"input",7),this.onFocus=Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.c)(this,"focus",7),this.onBlur=Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.c)(this,"blur",7),this.onConfirm=Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.c)(this,"confirm",7),this.onChange=Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.c)(this,"change",7),this.onKeyDown=Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.c)(this,"keydown",7),this.isOnComposition=!1,this.onInputExcuted=!1,this.type=void 0,this.password=!1,this.disabled=!1,this.maxlength=140,this.autoFocus=!1,this.confirmType="done",this.handleInput=e=>{e.stopPropagation();const{type:type,maxlength:maxlength,confirmType:confirmType,password:password}=this;if(!this.isOnComposition&&!this.onInputExcuted){let value=e.target.value;const inputType=getTrueType(type,confirmType,password);this.onInputExcuted=!0,"number"===inputType&&value&&maxlength<=value.length&&(value=value.substring(0,maxlength),e.target.value=value),this.onInput.emit({value:value,cursor:value.length})}},this.handleFocus=e=>{this.onInputExcuted=!1,this.onFocus.emit({value:e.target.value})},this.handleBlur=e=>{this.onBlur.emit({value:e.target.value})},this.handleChange=e=>{e.stopPropagation(),this.onChange.emit({value:e.target.value})},this.handleKeyDown=e=>{const{value:value}=e.target;this.onInputExcuted=!1,e.stopPropagation(),this.onKeyDown.emit({value:value}),13===e.keyCode&&this.onConfirm.emit({value:value})},this.handleComposition=e=>{e.target instanceof HTMLInputElement&&("compositionend"===e.type?(this.isOnComposition=!1,this.onInput.emit({value:e.target.value})):this.isOnComposition=!0)}}componentDidLoad(){"file"===this.type?(this.fileListener=()=>{this.onInput.emit()},this.inputRef.addEventListener("change",this.fileListener)):(this.inputRef.addEventListener("compositionstart",this.handleComposition),this.inputRef.addEventListener("compositionend",this.handleComposition)),Object.defineProperty(this.el,"value",{get:()=>this.inputRef.value,set:value=>this.value=value,configurable:!0})}disconnectedCallback(){"file"===this.type&&this.inputRef.removeEventListener("change",this.fileListener)}render(){const{value:value,type:type,password:password,placeholder:placeholder,disabled:disabled,maxlength:maxlength,autoFocus:autoFocus,confirmType:confirmType,name:name}=this;return Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.e)("input",{ref:input=>{this.inputRef=input,autoFocus&&(null==input||input.focus())},class:"weui-input",value:fixControlledValue(value),type:getTrueType(type,confirmType,password),placeholder:placeholder,disabled:disabled,maxlength:maxlength,autofocus:autoFocus,name:name,onInput:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleChange,onKeyDown:this.handleKeyDown})}get el(){return Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.d)(this)}};Input.style="taro-input-core{display:block}input{display:block;height:1.4rem;text-align:inherit;text-overflow:clip;overflow:hidden;white-space:nowrap}"}}]);
//# sourceMappingURL=27.15fb6d0535874d97d7d4.bundle.js.map