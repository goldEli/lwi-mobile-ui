/*! For license information please see 10.15fb6d0535874d97d7d4.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1515:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"taro_pull_to_refresh",(function(){return PullToRefresh}));var _index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(225),_index_ff1b322a_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1530);const Taro=__webpack_require__(164);function setTransform(nodeStyle,value){nodeStyle.transform=value,nodeStyle.webkitTransform=value,nodeStyle.MozTransform=value}const isWebView="undefined"!=typeof navigator&&/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),INDICATOR={activate:"release",deactivate:"pull",release:"loading",finish:"finish"};let supportsPassive=!1;try{const opts=Object.defineProperty({},"passive",{get(){supportsPassive=!0}});window.addEventListener("cancel",()=>({}),opts)}catch(e){}const willPreventDefault=!!supportsPassive&&{passive:!1},PullToRefresh=class{constructor(hostRef){Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.g)(this,hostRef),this.onRefresh=Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.c)(this,"refresh",7),this.prefixCls="rmc-pull-to-refresh",this.distanceToRefresh=50,this.damping=100,this.indicator=INDICATOR,this.currSt="deactivate",this.dragOnEdge=!1,this._ScreenY=0,this._startScreenY=0,this._lastScreenY=0,this._isMounted=!1,this.triggerPullDownRefresh=flag=>{!this.dragOnEdge&&this._isMounted&&(flag?(this._lastScreenY=this.distanceToRefresh+1,this.currSt="release",this.setContentStyle(this._lastScreenY)):(this.currSt="finish",this.reset()))},this.init=()=>{const ele=this.scrollContainer;this._to={touchstart:this.onTouchStart.bind(this,ele),touchmove:this.onTouchMove.bind(this,ele),touchend:this.onTouchEnd.bind(this,ele),touchcancel:this.onTouchEnd.bind(this,ele)},Object.keys(this._to).forEach(key=>{ele.addEventListener(key,this._to[key],willPreventDefault)})},this.destroy=()=>{const ele=this.scrollContainer;Object.keys(this._to).forEach(key=>{ele.removeEventListener(key,this._to[key])})},this.onTouchStart=(_,e)=>{this._ScreenY=this._startScreenY=e.touches[0].screenY,this._lastScreenY=this._lastScreenY||0},this.isEdge=ele=>{const container=this.scrollContainer;if(container&&container===document.body){return(document.scrollingElement?document.scrollingElement:document.body).scrollTop<=0}return ele.scrollTop<=0},this.damp=dy=>{if(Math.abs(this._lastScreenY)>this.damping)return 0;return dy*=.6*(1-Math.abs(this._ScreenY-this._startScreenY)/window.screen.height)},this.onTouchMove=(ele,e)=>{const _screenY=e.touches[0].screenY;if(!(this._startScreenY>_screenY)&&this.isEdge(ele)){this.dragOnEdge||(this._ScreenY=this._startScreenY=e.touches[0].screenY,this.dragOnEdge=!0),e.cancelable&&e.preventDefault();const _diff=Math.round(_screenY-this._ScreenY);this._ScreenY=_screenY,this._lastScreenY+=this.damp(_diff),this.setContentStyle(this._lastScreenY),Math.abs(this._lastScreenY)<this.distanceToRefresh?"deactivate"!==this.currSt&&(this.currSt="deactivate"):"deactivate"===this.currSt&&(this.currSt="activate"),isWebView&&e.changedTouches[0].clientY<0&&this.onTouchEnd()}},this.onTouchEnd=()=>{this.dragOnEdge&&(this.dragOnEdge=!1),"activate"===this.currSt?(this.currSt="release",this.onRefresh.emit(this),this._lastScreenY=this.distanceToRefresh+1,this.setContentStyle(this._lastScreenY)):"release"===this.currSt?(this._lastScreenY=this.distanceToRefresh+1,this.setContentStyle(this._lastScreenY)):this.reset()},this.reset=()=>{this._lastScreenY=0,this.setContentStyle(0)},this.setContentStyle=ty=>{this.contentRef&&setTransform(this.contentRef.style,ty?`translate3d(0px,${ty}px,0)`:"")}}get scrollContainer(){return document.querySelector(".taro-tabbar__panel")||document.body}statusChange(){if("release"===this.currSt){const pageEl=this.el.closest(".taro_page");pageEl&&pageEl.__page&&pageEl.__page.onPullDownRefresh()}}disconnectedCallback(){this.destroy()}componentDidLoad(){this.init(),this._isMounted=!0,Taro.eventCenter.on("__taroStartPullDownRefresh",({successHandler:successHandler,errorHandler:errorHandler})=>{try{this.triggerPullDownRefresh(!0),successHandler({errMsg:"startPullDownRefresh: ok"})}catch(e){errorHandler({errMsg:"startPullDownRefresh: fail"})}}),Taro.eventCenter.on("__taroStopPullDownRefresh",({successHandler:successHandler,errorHandler:errorHandler})=>{try{this.triggerPullDownRefresh(!1),successHandler({errMsg:"stopPullDownRefresh: ok"})}catch(e){errorHandler({errMsg:"stopPullDownRefresh: fail"})}})}render(){const renderRefresh=cls=>{const{currSt:currSt,dragOnEdge:dragOnEdge,prefixCls:prefixCls}=this,cla=Object(_index_ff1b322a_js__WEBPACK_IMPORTED_MODULE_1__.a)(cls,!dragOnEdge&&prefixCls+"-transition"),showIndicator="activate"===currSt||"release"===currSt;return Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.e)("div",{class:prefixCls+"-content-wrapper"},Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.e)("div",{class:cla,ref:el=>{this.contentRef=el}},showIndicator&&Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.e)("div",{class:prefixCls+"-indicator"},Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.e)("div",null),Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.e)("div",null),Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.e)("div",null)),Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.e)("slot",null)))};return this.scrollContainer?renderRefresh(`${this.prefixCls}-content ${this.prefixCls}-down`):Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.e)(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.a,{class:Object(_index_ff1b322a_js__WEBPACK_IMPORTED_MODULE_1__.a)(this.prefixCls,this.prefixCls+"-down")},renderRefresh(this.prefixCls+"-content"))}get el(){return Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.d)(this)}static get watchers(){return{currSt:["statusChange"]}}};PullToRefresh.style=".rmc-pull-to-refresh-content{transform-origin:left top 0px}.rmc-pull-to-refresh-content-wrapper{overflow:hidden}.rmc-pull-to-refresh-transition{transition:transform 0.3s}@keyframes rmc-pull-to-refresh-indicator{50%{opacity:0.2}100%{opacity:1}}.rmc-pull-to-refresh-indicator{text-align:center;height:30px;line-height:10px}.rmc-pull-to-refresh-indicator>div{background-color:grey;width:6px;height:6px;border-radius:100%;margin:3px;animation-fill-mode:both;display:inline-block;animation:rmc-pull-to-refresh-indicator 0.5s 0s infinite linear}.rmc-pull-to-refresh-indicator>div:nth-child(0){animation-delay:-0.1s !important}.rmc-pull-to-refresh-indicator>div:nth-child(1){animation-delay:-0.2s !important}.rmc-pull-to-refresh-indicator>div:nth-child(2){animation-delay:-0.3s !important}.rmc-pull-to-refresh-down .rmc-pull-to-refresh-indicator{margin-top:-25px}"},1530:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return classnames}));var classnames=function createCommonjsModule(fn,basedir,module){return fn(module={path:basedir,exports:{},require:function(path,base){return function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},module.exports),module.exports}((function(module){!function(){var hasOwn={}.hasOwnProperty;function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){var argType=typeof arg;if("string"===argType||"number"===argType)classes.push(arg);else if(Array.isArray(arg)){if(arg.length){var inner=classNames.apply(null,arg);inner&&classes.push(inner)}}else if("object"===argType)if(arg.toString===Object.prototype.toString)for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&classes.push(key);else classes.push(arg.toString())}}return classes.join(" ")}module.exports?(classNames.default=classNames,module.exports=classNames):window.classNames=classNames}()}))}}]);
//# sourceMappingURL=10.15fb6d0535874d97d7d4.bundle.js.map