(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{1519:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"taro_slider_core",(function(){return Slider}));var _index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(225);const Slider=class{constructor(hostRef){Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.g)(this,hostRef),this.onChange=Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.c)(this,"change",7),this.onChanging=Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.c)(this,"changing",7),this.min=0,this.max=100,this.step=1,this.disabled=!1,this.value=0,this.activeColor="#1aad19",this.backgroundColor="#e9e9e9",this.blockSize=28,this.blockColor="#ffffff",this.showValue=!1,this.name="",this.totalWidth=0,this.touching=!1,this.ogX=0,this.touchId=null,this.percent=0,this.isWillLoadCalled=!1,this.handleTouchStart=e=>{this.touching||this.disabled||(this.touching=!0,this.touchId=e.targetTouches[0].identifier,this.totalWidth=this.sliderInsRef.clientWidth,this.ogX=e.targetTouches[0].pageX,this.ogPercent=this.percent)},this.handleTouchMove=e=>{const{disabled:disabled,touching:touching,touchId:touchId,totalWidth:totalWidth,max:max,min:min,ogX:ogX,ogPercent:ogPercent}=this;if(!touching||disabled)return;if(e.targetTouches[0].identifier!==touchId)return;e.preventDefault();let percent=(e.targetTouches[0].pageX-ogX)/totalWidth*100+ogPercent;percent=Math.max(0,Math.min(percent,100));const val=min+.01*percent*(max-min);this.updateByStep(val),this.onChanging.emit({detail:e.detail,value:this.val})},this.handleTouchEnd=e=>{const{disabled:disabled,touching:touching}=this;touching&&!disabled&&(this.percent!==this.ogPercent&&this.onChange.emit({detail:e.detail,value:this.val}),this.touching=!1,this.touchId=null,this.ogX=0,this.ogPercent=0)}}function(newVal){if(!this.isWillLoadCalled)return;const{max:max,min:min}=this;if(null!==newVal&&newVal!==this.val){const val=Math.max(min,Math.min(newVal,max));this.updateByStep(val)}}componentDidLoad(){Object.defineProperty(this.el,"value",{get:()=>this.val,set:value=>this.value=value,configurable:!0}),this.handler.addEventListener("touchstart",this.handleTouchStart),this.handler.addEventListener("touchmove",this.handleTouchMove),this.handler.addEventListener("touchend",this.handleTouchEnd)}componentDidUpdate(){this.value=null}componentWillLoad(){this.isWillLoadCalled=!0;const{value:value,max:max,min:min}=this;if(null===value)return;const val=Math.max(min,Math.min(value,max));this.updateByStep(val)}updateByStep(value){const{max:max,min:min,step:step}=this,steps=Math.floor((max-min)/step);for(let i=0;i<=steps;i++){const current=min+step*i,next=i===steps?null:min+step*(i+1);if(value===current)break;if(!next&&value>current&&(value=current),next&&value>current&&value<next){value=value-current<step/2?current:next;break}}const percent=(value-min)/(max-min)*100;this.val=value,this.percent=percent}render(){const{showValue:showValue,backgroundColor:backgroundColor,activeColor:activeColor,blockColor:blockColor,name:name,percent:percent,val:val}=this;let blockSize=this.blockSize;const innerStyles={backgroundColor:backgroundColor},percentage=percent>100?100:percent,trackStyles={width:percentage+"%",backgroundColor:activeColor};blockSize<12&&(blockSize=12),blockSize>28&&(blockSize=28);const handlerStyles={left:percentage+"%",width:blockSize+"px",height:blockSize+"px",backgroundColor:blockColor,marginTop:`-${Math.floor(blockSize/2)}px`,marginLeft:`-${Math.floor(blockSize/2)}px`};return Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.e)(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.a,{class:"weui-slider-box"},Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.e)("div",{class:"weui-slider"},Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.e)("div",{class:"weui-slider__inner",style:innerStyles,ref:c=>this.sliderInsRef=c},Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.e)("div",{style:trackStyles,class:"weui-slider__track"}),Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.e)("div",{class:"weui-slider__handler",ref:dom=>{dom&&(this.handler=dom)},style:handlerStyles}),Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.e)("input",{type:"hidden",name:name,value:val}))),showValue&&Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.e)("div",{class:"weui-slider-box__value"},val))}get el(){return Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.d)(this)}static get watchers(){return{value:["function"]}}}}}]);
//# sourceMappingURL=37.15fb6d0535874d97d7d4.bundle.js.map