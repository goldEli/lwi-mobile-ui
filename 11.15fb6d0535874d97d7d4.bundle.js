/*! For license information please see 11.15fb6d0535874d97d7d4.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1518:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"taro_scroll_view_core",(function(){return ScrollView}));var _index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(225),_index_ff1b322a_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1530);function easeOutScroll(from,to,callback){if(from===to||"number"!=typeof from)return;const change=to-from,sTime=Date.now(),isLarger=to>=from;!function step(){from=function linear(t,b,c,d){return c*t/d+b}(Date.now()-sTime,from,change,500),isLarger&&from>=to||!isLarger&&to>=from?callback(to):(callback(from),requestAnimationFrame(step))}()}const ScrollView=class{constructor(hostRef){Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.g)(this,hostRef),this.onScroll=Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.c)(this,"scroll",7),this.onScrollToUpper=Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.c)(this,"scrolltoupper",7),this.onScrollToLower=Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.c)(this,"scrolltolower",7),this.scrollX=!1,this.scrollY=!1,this.upperThreshold=50,this.lowerThreshold=50,this.scrollWithAnimation=!1,this.handleScroll=e=>{if(e instanceof CustomEvent)return;const{scrollLeft:scrollLeft,scrollTop:scrollTop,scrollHeight:scrollHeight,scrollWidth:scrollWidth}=this.el;this._scrollLeft=scrollLeft,this._scrollTop=scrollTop,this.uperAndLower(),this.onScroll.emit({scrollLeft:scrollLeft,scrollTop:scrollTop,scrollHeight:scrollHeight,scrollWidth:scrollWidth})},this.uperAndLower=function debounce(fn,delay){let timer;return function(...arrs){clearTimeout(timer),timer=setTimeout((function(){fn(...arrs)}),delay)}}(()=>{const{offsetWidth:offsetWidth,offsetHeight:offsetHeight,scrollLeft:scrollLeft,scrollTop:scrollTop,scrollHeight:scrollHeight,scrollWidth:scrollWidth}=this.el,lowerThreshold=Number(this.lowerThreshold),upperThreshold=Number(this.upperThreshold);!isNaN(lowerThreshold)&&(this.scrollY&&offsetHeight+scrollTop+lowerThreshold>=scrollHeight||this.scrollX&&offsetWidth+scrollLeft+lowerThreshold>=scrollWidth)&&this.onScrollToLower.emit({direction:this.scrollX?"right":this.scrollY?"bottom":""}),!isNaN(upperThreshold)&&(this.scrollY&&scrollTop<=upperThreshold||this.scrollX&&scrollLeft<=upperThreshold)&&this.onScrollToUpper.emit({direction:this.scrollX?"left":this.scrollY?"top":""})},200)}watchScrollLeft(newVal){const scrollLeft=Number(newVal);this.scrollX&&!isNaN(scrollLeft)&&scrollLeft!==this._scrollLeft&&(this.scrollWithAnimation?easeOutScroll(this._scrollLeft,scrollLeft,pos=>this.el.scrollLeft=pos):this.el.scrollLeft=scrollLeft,this._scrollLeft=scrollLeft)}watchScrollTop(newVal){const scrollTop=Number(newVal);this.scrollY&&!isNaN(scrollTop)&&scrollTop!==this._scrollTop&&(this.scrollWithAnimation?easeOutScroll(this._scrollTop,scrollTop,pos=>this.el.scrollTop=pos):this.el.scrollTop=scrollTop,this._scrollTop=scrollTop)}watchScrollIntoView(newVal){var _a;"string"==typeof newVal&&newVal&&(null===(_a=document.querySelector("#"+newVal))||void 0===_a||_a.scrollIntoView({behavior:"smooth",block:"center",inline:"start"}))}componentDidLoad(){const{scrollY:scrollY,scrollX:scrollX,scrollWithAnimation:scrollWithAnimation}=this,scrollTop=Number(this.mpScrollTop),scrollLeft=Number(this.mpScrollLeft);scrollY&&!isNaN(scrollTop)&&(scrollWithAnimation?easeOutScroll(0,scrollTop,pos=>this.el.scrollTop=pos):this.el.scrollTop=scrollTop,this._scrollTop=scrollTop),scrollX&&!isNaN(scrollLeft)&&(scrollWithAnimation?easeOutScroll(0,scrollLeft,pos=>this.el.scrollLeft=pos):this.el.scrollLeft=scrollLeft,this._scrollLeft=scrollLeft)}render(){const{scrollX:scrollX,scrollY:scrollY}=this,cls=Object(_index_ff1b322a_js__WEBPACK_IMPORTED_MODULE_1__.a)({"taro-scroll-view__scroll-x":scrollX,"taro-scroll-view__scroll-y":scrollY});return Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.e)(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.a,{class:cls,onScroll:this.handleScroll},Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.e)("slot",null))}get el(){return Object(_index_310de3d5_js__WEBPACK_IMPORTED_MODULE_0__.d)(this)}static get watchers(){return{mpScrollLeft:["watchScrollLeft"],mpScrollTop:["watchScrollTop"],mpScrollIntoView:["watchScrollIntoView"]}}};ScrollView.style="taro-scroll-view-core{display:block;width:100%;-webkit-overflow-scrolling:auto}taro-scroll-view-core::-webkit-scrollbar{display:none}.taro-scroll-view__scroll-x{overflow-x:scroll;overflow-y:hidden}.taro-scroll-view__scroll-y{overflow-x:hidden;overflow-y:scroll}"},1530:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return classnames}));var classnames=function createCommonjsModule(fn,basedir,module){return fn(module={path:basedir,exports:{},require:function(path,base){return function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},module.exports),module.exports}((function(module){!function(){var hasOwn={}.hasOwnProperty;function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){var argType=typeof arg;if("string"===argType||"number"===argType)classes.push(arg);else if(Array.isArray(arg)){if(arg.length){var inner=classNames.apply(null,arg);inner&&classes.push(inner)}}else if("object"===argType)if(arg.toString===Object.prototype.toString)for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&classes.push(key);else classes.push(arg.toString())}}return classes.join(" ")}module.exports?(classNames.default=classNames,module.exports=classNames):window.classNames=classNames}()}))}}]);
//# sourceMappingURL=11.15fb6d0535874d97d7d4.bundle.js.map